<div class="roulette-container">
  
  <!-- Header -->
  <div class="hud-bar">
    <button (click)="goHome()" style="background:transparent; border:1px solid #fff; color:white; padding:5px 15px; cursor:pointer;">ESCI</button>
    <div style="font-size:1.2rem;">SALDO: <span style="color:gold">{{ balance }}€</span></div>
  </div>

  <!-- Ruota -->
  <div class="wheel-area">
    <div class="wheel-graphic" [class.spinning]="isSpinning"></div>
    <div class="ball" [class.ball-spin]="isSpinning"></div>
    
    <!-- Numero Vincente -->
    <div class="result-hub">
      <span *ngIf="!isSpinning && lastNumber !== null" [style.color]="checkRed(lastNumber) ? 'red' : 'black'">
        {{ lastNumber }}
      </span>
    </div>
  </div>

  <!-- Messaggio Vincita -->
  <div *ngIf="lastWin > 0" style="color:gold; font-size:2rem; margin-bottom:10px; text-shadow:0 0 10px red;">
    HAI VINTO {{ lastWin }}€!
  </div>

  <!-- TAVOLO VERDE -->
  <div class="betting-board">
    
    <!-- PARTE SUPERIORE: Numeri e Zero -->
    <div class="grid-top">
      <!-- Zero -->
      <div class="zero-col">
        <div class="cell-0" (click)="placeBet('number', 0)">
          0
          <div class="chip-stack" *ngIf="getBetAmountOnCell('number', 0) > 0">{{ getBetAmountOnCell('number', 0) }}</div>
        </div>
      </div>

      <!-- Griglia 1-36 -->
      <div class="numbers-grid">
        <!-- Generiamo le colonne in loop, ma attenzione all'ordine delle righe (3, 2, 1) -->
        <!-- RIGA 3 (3, 6, 9...) -->
        <ng-container *ngFor="let n of [3,6,9,12,15,18,21,24,27,30,33,36]">
          <div class="cell" [class.bg-red]="checkRed(n)" [class.bg-black]="!checkRed(n)" (click)="placeBet('number', n)">
            {{n}}
            <div class="chip-stack" *ngIf="getBetAmountOnCell('number', n) > 0">{{ getBetAmountOnCell('number', n) }}</div>
          </div>
        </ng-container>

        <!-- RIGA 2 (2, 5, 8...) -->
        <ng-container *ngFor="let n of [2,5,8,11,14,17,20,23,26,29,32,35]">
          <div class="cell" [class.bg-red]="checkRed(n)" [class.bg-black]="!checkRed(n)" (click)="placeBet('number', n)">
            {{n}}
            <div class="chip-stack" *ngIf="getBetAmountOnCell('number', n) > 0">{{ getBetAmountOnCell('number', n) }}</div>
          </div>
        </ng-container>

        <!-- RIGA 1 (1, 4, 7...) -->
        <ng-container *ngFor="let n of [1,4,7,10,13,16,19,22,25,28,31,34]">
          <div class="cell" [class.bg-red]="checkRed(n)" [class.bg-black]="!checkRed(n)" (click)="placeBet('number', n)">
            {{n}}
            <div class="chip-stack" *ngIf="getBetAmountOnCell('number', n) > 0">{{ getBetAmountOnCell('number', n) }}</div>
          </div>
        </ng-container>
      </div>
    </div>

    <!-- PARTE CENTRALE: Dozzine -->
    <div class="grid-mid">
      <div></div> <!-- Spazio vuoto sotto lo zero -->
      <div class="cell-wide" (click)="placeBet('dozen', 1)">
        1st 12
        <div class="chip-stack" *ngIf="getBetAmountOnCell('dozen', 1) > 0">{{ getBetAmountOnCell('dozen', 1) }}</div>
      </div>
      <div class="cell-wide" (click)="placeBet('dozen', 2)">
        2nd 12
        <div class="chip-stack" *ngIf="getBetAmountOnCell('dozen', 2) > 0">{{ getBetAmountOnCell('dozen', 2) }}</div>
      </div>
      <div class="cell-wide" (click)="placeBet('dozen', 3)">
        3rd 12
        <div class="chip-stack" *ngIf="getBetAmountOnCell('dozen', 3) > 0">{{ getBetAmountOnCell('dozen', 3) }}</div>
      </div>
    </div>

    <!-- PARTE BASSA: Chance Semplici -->
    <div class="grid-bot">
      <div></div>
      <div class="cell-wide" (click)="placeBet('half', 'low')">1-18 <div class="chip-stack" *ngIf="getBetAmountOnCell('half', 'low') > 0">{{ getBetAmountOnCell('half', 'low') }}</div></div>
      <div class="cell-wide" (click)="placeBet('even_odd', 'even')">EVEN <div class="chip-stack" *ngIf="getBetAmountOnCell('even_odd', 'even') > 0">{{ getBetAmountOnCell('even_odd', 'even') }}</div></div>
      <div class="cell-wide" style="background:#c0392b" (click)="placeBet('color', 'red')">RED <div class="chip-stack" *ngIf="getBetAmountOnCell('color', 'red') > 0">{{ getBetAmountOnCell('color', 'red') }}</div></div>
      <div class="cell-wide" style="background:#2c3e50" (click)="placeBet('color', 'black')">BLACK <div class="chip-stack" *ngIf="getBetAmountOnCell('color', 'black') > 0">{{ getBetAmountOnCell('color', 'black') }}</div></div>
      <div class="cell-wide" (click)="placeBet('even_odd', 'odd')">ODD <div class="chip-stack" *ngIf="getBetAmountOnCell('even_odd', 'odd') > 0">{{ getBetAmountOnCell('even_odd', 'odd') }}</div></div>
      <div class="cell-wide" (click)="placeBet('half', 'high')">19-36 <div class="chip-stack" *ngIf="getBetAmountOnCell('half', 'high') > 0">{{ getBetAmountOnCell('half', 'high') }}</div></div>
    </div>

  </div>

  <!-- CONTROLLI -->
  <div class="controls-area">
    <div class="chip-select c-10" [class.active]="selectedChip===10" (click)="selectChip(10)">10</div>
    <div class="chip-select c-50" [class.active]="selectedChip===50" (click)="selectChip(50)">50</div>
    <div class="chip-select c-100" [class.active]="selectedChip===100" (click)="selectChip(100)">100</div>

    <div style="color:#aaa; font-size:0.8rem; margin:0 10px;">
      TOTALE PUNTATO<br>
      <strong style="color:white; font-size:1.2rem;">{{ getCurrentTotalBet() }}€</strong>
    </div>

    <button class="btn-spin" (click)="spin()" [disabled]="isSpinning">GIRA RUOTA</button>
    <button class="btn-clear" (click)="clearBets()" [disabled]="isSpinning">RESET</button>
  </div>
</div>
