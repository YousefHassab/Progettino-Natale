<div class="blackjack-room">
  <div class="hud">
    <div style="font-size:0.8rem; color:#aaa;">SALDO</div>
    <div style="font-size:1.5rem; color:gold;">{{ balance | number:'1.0-0' }}€</div>
  </div>
  
  <button class="btn-exit" (click)="goHome()">ESCI</button>

  <div class="game-table">
    <div class="table-logo">BLACKJACK PAYS 3 TO 2</div>

    <!-- MESSAGGIO DI FINE PARTITA (OVERLAY) -->
    <!-- Z-index altissimo per stare sopra a tutto -->
    <div class="overlay-msg" *ngIf="gameOver" (click)="resetTable()">
      <div class="msg-box">
        <h1>{{ message }}</h1>
        <div class="win-amount" *ngIf="message.includes('VINTO') || message.includes('BLACKJACK')">
          +{{ message.includes('BLACKJACK') ? bet * 2.5 : bet * 2 }}€
        </div>
        <button class="btn-reset" (click)="resetTable()">GIOCA ANCORA</button>
      </div>
    </div>

    <!-- AREA DEALER -->
    <div class="dealer-area">
      <div *ngIf="gameStarted" class="score-pill">BANCO: {{ dealerScore }}</div>
      <div class="hand">
        <div class="card-visual" *ngFor="let c of dealerHand" 
             [class.red]="c.suit=='♥'||c.suit=='♦'">
          <div class="top">{{c.val}}</div>
          <div class="mid">{{c.suit}}</div>
          <div class="bot">{{c.val}}</div>
        </div>
      </div>
    </div>

    <!-- AREA PLAYER -->
    <div class="player-area">
      <div class="hand">
        <div class="card-visual" *ngFor="let c of playerHand"
             [class.red]="c.suit=='♥'||c.suit=='♦'">
          <div class="top">{{c.val}}</div>
          <div class="mid">{{c.suit}}</div>
          <div class="bot">{{c.val}}</div>
        </div>
      </div>
      <div *ngIf="gameStarted" class="score-pill">TU: {{ playerScore }}</div>
    </div>
  </div>

  <!-- CONTROLLI -->
  <div class="controls-bar">
    <div *ngIf="!gameStarted" class="chips-area">
      <span>PUNTA:</span>
      <button class="chip c-10" (click)="startGame(10)">10</button>
      <button class="chip c-50" (click)="startGame(50)">50</button>
      <button class="chip c-100" (click)="startGame(100)">100</button>
    </div>

    <div *ngIf="gameStarted && !gameOver" class="actions-area">
      <button class="btn-act hit" (click)="hit()">CARTA</button>
      <button class="btn-act stand" (click)="stand()">STAI</button>
      <button class="btn-act double" *ngIf="canDouble" (click)="double()">RADDOPPIA</button>
    </div>
  </div>
</div>
